(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{59279:(e,a,i)=>{Promise.resolve().then(i.bind(i,44664))},44664:(e,a,i)=>{"use strict";i.r(a),i.d(a,{default:()=>Q});var s=i(95155),n=i(12115),r=i(76046),t=i(75436),l=i(64665),o=i(42479),d=i(20457),c=i(39241),x=i(9561),m=i(21455),h=i.n(m),u=i(39905),p=i(65724),g=i(96821),j=i(97975),f=i(4577),A=i(16847),b=i(67663),I=i(76372),v=i(47821),w=i(83257),y=i(22282),C=i(96854),S=i(61585),z=i(90752),k=i(30562),N=i(21291),E=i(1521),J=i(8187),D=i(10897),F=i(93950),q=i(35256),M=i(6327),_=i(35974);let O=(0,_.UU)("https://wirczpfvwuajqmadpxhr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndpcmN6cGZ2d3VhanFtYWRweGhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY1Njk3NTUsImV4cCI6MjA1MjE0NTc1NX0.gvsKxIzIhAL-liWiMR9D64czxYzSOWWMJ-kEXqajDis"),W=(0,f.A)(c.A)(()=>({display:"flex",flexDirection:"column"}));function Y(){let[e,a]=n.useState(!1),[i,l]=n.useState("success"),[o,d]=n.useState(""),[x,m]=n.useState(""),[f,_]=n.useState(!1),[Y,R]=n.useState("null"),[P,T]=n.useState(""),[G,U]=n.useState(""),[X,Z]=n.useState(""),[L,V]=n.useState(""),[B,K]=n.useState(null),[Q,$]=n.useState(""),[H,ee]=n.useState(null),[ea,ei]=n.useState({}),es=(0,r.useRouter)(),en=(0,r.useSearchParams)(),er=n.useMemo(()=>({id:en.get("id")||""}),[en]);n.useEffect(()=>{(async()=>{if(er.id){let{data:e,error:a}=await O.from("info").select("*").eq("id",er.id);a?console.error("Error fetching data:",a):(T(e[0].name),U(e[0].email),V(e[0].alamat),Z(e[0].nomor_telepon),K(e[0].tgl_lahir?h()(e[0].tgl_lahir):null),"Indonesia"===e[0].kewarganegaraan?R(0):(R(1),$(e[0].kewarganegaraan)),ee(e[0].image))}})()},[er.id]);let et=(e,a,i)=>{l(e),d(a),m(i)},el=async()=>{_(!0);let e={id:er.id,name:P,email:G,alamat:L,nomor_telepon:X,tgl_lahir:B,kewarganegaraan:0===Y?"Indonesia":Q,image:H};if(""!==er.id)try{(await fetch("/api",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(et("success","Success","Data berhasil disimpan"),es.back()):et("error","Error","Data gagal disimpan")}catch(e){et("error","Error",e.message)}finally{_(!1),a(!0)}else try{(await fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:P,email:G,alamat:L,nomor_telepon:X,tgl_lahir:B,kewarganegaraan:0===Y?"Indonesia":Q,image:H})})).ok?(et("success","Success","Data berhasil disimpan"),es.back()):et("error","Error","Data gagal disimpan")}catch(e){et("error","Error",e.message)}finally{_(!1),a(!0)}},eo=[{negara:"Malaysia"},{negara:"Singapore"},{negara:"Thailand"},{negara:"Australia"}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(q.A,{in:e,sx:{position:"fixed",top:"1rem",right:"1rem"},children:(0,s.jsxs)(D.A,{severity:i,action:(0,s.jsx)(v.A,{"aria-label":"close",color:"inherit",size:"small",onClick:()=>{a(!1)},children:(0,s.jsx)(M.A,{fontSize:"inherit"})}),sx:{mb:2},children:[(0,s.jsx)(F.A,{children:o}),x]})}),(0,s.jsx)(t.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1,width:"100%",maxWidth:{sm:"100%",md:600},maxHeight:"720px",gap:{xs:5,md:"none"}},children:(0,s.jsx)(n.Fragment,{children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),el()},children:[(0,s.jsxs)(c.A,{container:!0,spacing:3,children:[(0,s.jsx)(W,{size:{xs:12},children:(0,s.jsx)(E.A,{direction:"row",spacing:2,children:(0,s.jsx)(N.A,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{accept:"image/*",type:"file",id:"upload-avatar",style:{display:"none"},onChange:e=>{let a=e.target.files[0];if(a){let e=new FileReader;e.onload=()=>{ee(e.result)},e.readAsDataURL(a)}}}),(0,s.jsx)("label",{htmlFor:"upload-avatar",children:(0,s.jsx)(v.A,{component:"span",children:(0,s.jsx)(S.A,{})})})]}),children:(0,s.jsx)(k.A,{alt:P,src:H,sx:{width:100,height:100}})})})}),(0,s.jsxs)(W,{size:{xs:12,md:6},children:[(0,s.jsx)(g.A,{htmlFor:"full_name",required:!0,children:"Nama lengkap"}),(0,s.jsx)(j.A,{id:"full_name",name:"full_name",type:"name",placeholder:"Your name",autoComplete:"Nama lengkap",value:P,required:!0,size:"small",onChange:e=>T(e.target.value)})]}),(0,s.jsxs)(W,{size:{xs:12,md:6},children:[(0,s.jsx)(g.A,{htmlFor:"email",required:!0,children:"Email"}),(0,s.jsx)(j.A,{id:"email",name:"email",type:"email",placeholder:"example@gmail.com",autoComplete:"Email",value:G,required:!0,size:"small",onChange:e=>U(e.target.value)})]}),(0,s.jsxs)(W,{size:{xs:12},children:[(0,s.jsx)(g.A,{htmlFor:"number",required:!0,children:"Nomor telepon"}),(0,s.jsx)(j.A,{id:"number",name:"number",type:"number",placeholder:"Street name and number",autoComplete:"shipping address-line1",required:!0,value:X,size:"small",onChange:e=>Z(e.target.value)})]}),(0,s.jsxs)(W,{size:{xs:12},children:[(0,s.jsx)(g.A,{htmlFor:"alamat",required:!0,children:"Alamat"}),(0,s.jsx)(j.A,{id:"alamat",name:"alamat",type:"address",placeholder:"Jl. Kebon Jeruk No. 1",autoComplete:"alamat",required:!0,value:L,size:"small",onChange:e=>V(e.target.value)})]}),(0,s.jsxs)(W,{size:{xs:6},children:[(0,s.jsx)(g.A,{required:!0,children:"Tanggal lahir"}),(0,s.jsx)(b.$,{dateAdapter:A.R,children:(0,s.jsx)(I.l,{value:B,onChange:e=>K(e),format:"YYYY-MM-DD",renderInput:e=>(0,s.jsx)(j.A,{...e})})})]}),(0,s.jsxs)(W,{size:{xs:6},children:[(0,s.jsx)(g.A,{htmlFor:"wni",required:!0,children:"Kewarganegaraan"}),(0,s.jsxs)(z.A,{labelId:"wni",id:"wni",value:Y,label:"Age",onChange:e=>R(e.target.value),children:[(0,s.jsx)(w.A,{value:0,children:"WNI"}),(0,s.jsx)(w.A,{value:1,children:"WNA"})]})]}),1===Y?(0,s.jsx)(W,{size:{xs:12},children:(0,s.jsx)(p.A,{id:"negara",options:eo,getOptionLabel:e=>e.negara,value:eo.find(e=>e.negara===Q)||null,onChange:(e,a)=>$(a?a.negara:null),renderInput:e=>(0,s.jsx)(u.A,{...e,label:"Negara",variant:"outlined"})})}):null]}),(0,s.jsx)(t.A,{sx:[{display:"flex",flexDirection:{xs:"column-reverse",sm:"row"},alignItems:"end",flexGrow:1,gap:1,pb:{xs:12,sm:0},mt:{xs:2,sm:8},mb:"60px"},{justifyContent:"space-between"}],children:(0,s.jsx)(y.A,{variant:"contained",endIcon:f?(0,s.jsx)(C.A,{size:16}):(0,s.jsx)(J.A,{}),type:"submit",sx:{width:{xs:"100%",sm:"fit-content"}},children:"Submit"})})]})})})]})}var R=i(81996),P=i.n(R);function T(e){let{totalPrice:a,edit:i}=e;return(0,s.jsxs)(n.Fragment,{children:[i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.A,{variant:"subtitle2",sx:{color:"text.secondary"},children:"Edit"}),(0,s.jsx)(x.A,{variant:"h4",gutterBottom:!0,children:a})]}):(0,s.jsx)(x.A,{variant:"h4",gutterBottom:!0,children:"Add new"}),(0,s.jsx)(l.A,{onClick:()=>router.push("/add"),sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",color:"inherit",cursor:"pointer"},children:(0,s.jsxs)(E.A,{direction:"row",spacing:2,useFlexGap:!0,sx:{p:3,height:"100%",borderColor:"hsla(220, 25%, 25%, 0.3)",alignItems:"center",width:"100%"},children:[(0,s.jsx)(k.A,{alt:"Annas",src:"ima",sx:{width:32,height:32}}),(0,s.jsx)(E.A,{direction:"row",spacing:1,sx:{flexGrow:1,alignItems:"center"},children:(0,s.jsxs)("div",{style:{width:"100%"},children:[(0,s.jsx)(x.A,{sx:{fontWeight:"medium",fontSize:14},children:"Name"}),(0,s.jsx)(x.A,{sx:{fontWeight:"medium",fontSize:12},children:"example@example.com"})]})})]})})]})}T.propTypes={totalPrice:P().string.isRequired};var G=i(19579),U=i(27633);function X(e){let{totalPrice:a}=e,[i,r]=n.useState(!1),l=e=>()=>{r(e)},o=(0,s.jsxs)(t.A,{sx:{width:"auto",px:3,pb:3,pt:8},role:"presentation",children:[(0,s.jsx)(v.A,{onClick:l(!1),sx:{position:"absolute",right:8,top:8},children:(0,s.jsx)(M.A,{})}),(0,s.jsx)(T,{totalPrice:a})]});return(0,s.jsxs)("div",{children:[(0,s.jsx)(y.A,{variant:"text",endIcon:(0,s.jsx)(U.A,{}),onClick:l(!0),children:"View details"}),(0,s.jsx)(G.Ay,{open:i,anchor:"top",onClose:l(!1),PaperProps:{sx:{top:"var(--template-frame-height, 0px)",backgroundImage:"none",backgroundColor:"background.paper"}},children:o})]})}X.propTypes={totalPrice:P().string.isRequired};var Z=i(41674),L=i(32238),V=i(76581);let B=(0,_.UU)("https://wirczpfvwuajqmadpxhr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndpcmN6cGZ2d3VhanFtYWRweGhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY1Njk3NTUsImV4cCI6MjA1MjE0NTc1NX0.gvsKxIzIhAL-liWiMR9D64czxYzSOWWMJ-kEXqajDis");function K(e){let a=(0,r.useSearchParams)(),i=(0,r.useRouter)(),[m,h]=n.useState({}),u=(0,n.useMemo)(()=>({id:a.get("id")||""}),[a]);return n.useEffect(()=>{(async()=>{if(u.id){let{data:e,error:a}=await B.from("info").select("*").eq("id",u.id);a?console.error("Error fetching data:",a):h(e[0])}})()},[u.id]),(0,s.jsxs)(Z.A,{...e,children:[(0,s.jsx)(d.default,{enableColorScheme:!0}),(0,s.jsx)(t.A,{sx:{position:"fixed",top:"1rem",right:"1rem"},children:(0,s.jsx)(L.A,{})}),(0,s.jsxs)(c.A,{container:!0,sx:{height:{xs:"100%",sm:"calc(100dvh - var(--template-frame-height, 0px))"},mt:{xs:4,sm:0}},children:[(0,s.jsxs)(c.A,{size:{xs:12,sm:5,lg:4},sx:{display:{xs:"none",md:"flex"},flexDirection:"column",backgroundColor:"background.paper",borderRight:{sm:"none",md:"1px solid"},borderColor:{sm:"none",md:"divider"},alignItems:"start",pt:16,px:10,gap:4},children:[(0,s.jsx)(v.A,{onClick:()=>i.back(),children:(0,s.jsx)(V.A,{})}),(0,s.jsx)(t.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1,width:"100%",maxWidth:500},children:(0,s.jsx)(T,{totalPrice:"$134.98",edit:!1})})]}),(0,s.jsxs)(c.A,{size:{sm:12,md:7,lg:8},sx:{display:"flex",flexDirection:"column",maxWidth:"100%",width:"100%",backgroundColor:{xs:"transparent",sm:"background.default"},alignItems:"start",pt:{xs:0,sm:16},px:{xs:2,sm:10},gap:{xs:4,md:8}},children:[(0,s.jsx)(l.A,{sx:{display:{xs:"flex",md:"none"},width:"100%"},children:(0,s.jsxs)(o.A,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.A,{variant:"subtitle2",gutterBottom:!0,children:m.name}),(0,s.jsx)(x.A,{variant:"body1",children:m.email})]}),(0,s.jsx)(X,{totalPrice:m.name})]})}),(0,s.jsx)(Y,{})]})]})]})}function Q(e){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(K,{...e})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[461,850,670,759,59,441,455,358],()=>a(59279)),_N_E=e.O()}]);